# MuseumAgent Demo - Web å®¢æˆ·ç«¯ç¤ºä¾‹

åŸºäº **MuseumAgent Client SDK V2.0** å¼€å‘çš„ Web å®¢æˆ·ç«¯ç¤ºä¾‹åº”ç”¨ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **ä¼šè¯è‡ªåŠ¨æ¢å¤**ï¼šåˆ·æ–°é¡µé¢åè‡ªåŠ¨é‡è¿
- âš™ï¸ **é…ç½®æŒä¹…åŒ–**ï¼šé…ç½®è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½
- ğŸ¤ **è¯­éŸ³äº¤äº’**ï¼šæ”¯æŒå½•éŸ³ã€æ’­æ”¾ã€VAD è¯­éŸ³æ£€æµ‹
- ğŸ’¬ **å®æ—¶å¯¹è¯**ï¼šæµå¼æ–‡æœ¬å’Œè¯­éŸ³å“åº”
- ğŸ”§ **å‡½æ•°è°ƒç”¨**ï¼šæ”¯æŒæ™ºèƒ½ä½“å‡½æ•°è°ƒç”¨
- ğŸ¨ **ç°ä»£ UI**ï¼šç®€æ´ç¾è§‚çš„ç”¨æˆ·ç•Œé¢

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
Demo/
â”œâ”€â”€ lib/                          # SDK åº“ï¼ˆæ„å»ºäº§ç‰©ï¼‰
â”‚   â”œâ”€â”€ museum-agent-sdk.min.js      # SDK å‹ç¼©ç‰ˆ (34KB)
â”‚   â”œâ”€â”€ museum-agent-sdk.min.js.map  # Source Map
â”‚   â””â”€â”€ vad-processor.js             # AudioWorklet å¤„ç†å™¨ (5KB) âš ï¸
â”‚
â”œâ”€â”€ src/                          # åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ components/              # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginForm.js        # ç™»å½•è¡¨å•
â”‚   â”‚   â”œâ”€â”€ ChatWindow.js       # èŠå¤©çª—å£
â”‚   â”‚   â”œâ”€â”€ MessageBubble.js    # æ¶ˆæ¯æ°”æ³¡
â”‚   â”‚   â””â”€â”€ SettingsPanel.js    # è®¾ç½®é¢æ¿
â”‚   â”œâ”€â”€ utils/                   # åº”ç”¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ dom.js              # DOM å·¥å…·
â”‚   â”‚   â””â”€â”€ audioPlayer.js      # éŸ³é¢‘æ’­æ”¾å™¨
â”‚   â”œâ”€â”€ app.js                   # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ styles.css               # æ ·å¼æ–‡ä»¶
â”‚
â”œâ”€â”€ res/                          # èµ„æºæ–‡ä»¶
â”œâ”€â”€ index.html                    # å…¥å£é¡µé¢
â”œâ”€â”€ ssl_server.py                # å¼€å‘æœåŠ¡å™¨
â””â”€â”€ start.bat                    # å¯åŠ¨è„šæœ¬
```

**âš ï¸ é‡è¦**ï¼š`vad-processor.js` æ˜¯ AudioWorklet å¤„ç†å™¨ï¼Œå½•éŸ³åŠŸèƒ½å¿…éœ€ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# Windows
start.bat

# æˆ–æ‰‹åŠ¨å¯åŠ¨
python ssl_server.py
```

### 2. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`https://localhost:8443`

### 3. ç™»å½•

- **æœåŠ¡å™¨åœ°å€**ï¼š`wss://museum.soulflaw.com:12301`
- **ç”¨æˆ·å**ï¼š`123`
- **å¯†ç **ï¼š`123`

## ğŸ“– ä½¿ç”¨è¯´æ˜

### ä¼šè¯ç®¡ç†

- **é¦–æ¬¡ç™»å½•**ï¼šè¾“å…¥æœåŠ¡å™¨åœ°å€å’Œè®¤è¯ä¿¡æ¯
- **è‡ªåŠ¨æ¢å¤**ï¼šåˆ·æ–°é¡µé¢åè‡ªåŠ¨é‡è¿ï¼ˆä¼šè¯æœ‰æ•ˆæœŸ 24 å°æ—¶ï¼‰
- **æ‰‹åŠ¨ç™»å‡º**ï¼šç‚¹å‡»"ç™»å‡º"æŒ‰é’®æ¸…é™¤ä¼šè¯

### é…ç½®ç®¡ç†

- ç‚¹å‡»å³ä¸Šè§’ âš™ï¸ å›¾æ ‡æ‰“å¼€è®¾ç½®é¢æ¿
- ä¿®æ”¹é…ç½®åè‡ªåŠ¨ä¿å­˜
- é…ç½®åŒ…æ‹¬ï¼š
  - åŸºæœ¬é…ç½®ï¼ˆTTSã€SRSã€è‡ªåŠ¨æ’­æ”¾ç­‰ï¼‰
  - æ™ºèƒ½ä½“è§’è‰²é…ç½®
  - ä¸Šä¸‹æ–‡é…ç½®
  - å‡½æ•°å®šä¹‰
  - VAD å‚æ•°

### è¯­éŸ³äº¤äº’

- ç‚¹å‡» ğŸ¤ æŒ‰é’®å¼€å§‹å½•éŸ³
- æ”¯æŒ VAD è‡ªåŠ¨æ£€æµ‹è¯­éŸ³å¼€å§‹å’Œç»“æŸ
- ç‚¹å‡» â¹ï¸ æŒ‰é’®åœæ­¢å½•éŸ³
- æ”¶åˆ°è¯­éŸ³å›å¤åè‡ªåŠ¨æ’­æ”¾

### æ–‡æœ¬äº¤äº’

- åœ¨è¾“å…¥æ¡†è¾“å…¥æ–‡å­—
- æŒ‰ Enter å‘é€ï¼ˆShift+Enter æ¢è¡Œï¼‰
- å®æ—¶æ¥æ”¶æµå¼æ–‡æœ¬å“åº”

## ğŸ”§ å¼€å‘æŒ‡å—

### ä½¿ç”¨ SDK

Demo ä½¿ç”¨ SDK çš„æ„å»ºäº§ç‰©ï¼ˆUMD æ ¼å¼ï¼‰ï¼š

```html
<!-- index.html -->
<script src="./lib/museum-agent-sdk.min.js"></script>
<script type="module" src="./src/app.js"></script>
```

```javascript
// src/app.js
const { MuseumAgentClient, Events } = window.MuseumAgentSDK;

// åˆ›å»ºå®¢æˆ·ç«¯
const client = new MuseumAgentClient({
  serverUrl: 'wss://your-server.com'
});

// å°è¯•æ¢å¤ä¼šè¯
const restored = await client.reconnectFromSavedSession();

if (!restored) {
  // é¦–æ¬¡è¿æ¥
  await client.connect(authData);
  await client.saveSession();
}
```

### æ›´æ–° SDK

å½“ SDK æœ‰æ›´æ–°æ—¶ï¼š

```bash
# æ–¹å¼ 1ï¼šä» SDK ç›®å½•è‡ªåŠ¨æ›´æ–°ï¼ˆæ¨èï¼‰
cd ../../sdk
update-demo.bat

# æ–¹å¼ 2ï¼šæ‰‹åŠ¨å¤åˆ¶
cd ../../sdk
npm run build
cp dist/museum-agent-sdk.min.js ../web/Demo/lib/
cp dist/museum-agent-sdk.min.js.map ../web/Demo/lib/
cp src/managers/vad-processor.js ../web/Demo/lib/

# æ–¹å¼ 3ï¼šä» CDN å¼•ç”¨ï¼ˆä¿®æ”¹ index.htmlï¼‰
<script src="https://unpkg.com/museum-agent-client-sdk@2.0.0/dist/museum-agent-sdk.min.js"></script>
```

**æ³¨æ„**ï¼šæ›´æ–°æ—¶å¿…é¡»åŒæ—¶å¤åˆ¶ `vad-processor.js`ï¼Œå¦åˆ™å½•éŸ³åŠŸèƒ½å°†æ— æ³•å·¥ä½œã€‚

## ğŸ“š SDK æ–‡æ¡£

è¯¦ç»†çš„ SDK æ–‡æ¡£è¯·æŸ¥çœ‹ï¼š
- **SDK ä»“åº“**ï¼š`../../sdk/`
- **API æ–‡æ¡£**ï¼š`../../sdk/README.md`
- **æ„å»ºæŒ‡å—**ï¼š`../../sdk/BUILD.md`
- **æ›´æ–°æ—¥å¿—**ï¼š`../../sdk/CHANGELOG.md`

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. ä¼šè¯è‡ªåŠ¨æ¢å¤ âœ…

åˆ·æ–°é¡µé¢åè‡ªåŠ¨é‡è¿ï¼Œæ— éœ€é‡æ–°ç™»å½•ã€‚

```javascript
// åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ¢å¤
const client = new MuseumAgentClient({ ... });
const restored = await client.reconnectFromSavedSession();

if (restored) {
  // ä¼šè¯æ¢å¤æˆåŠŸ
  this.showChatView();
} else {
  // é¦–æ¬¡ç™»å½•
  this.showLoginView();
}
```

### 2. é…ç½®æŒä¹…åŒ– âœ…

æ‰€æœ‰é…ç½®è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°ï¼Œä¸‹æ¬¡å¯åŠ¨è‡ªåŠ¨åŠ è½½ã€‚

```javascript
// æ›´æ–°é…ç½®ï¼ˆè‡ªåŠ¨ä¿å­˜ï¼‰
client.updateConfig('requireTTS', false);

// æ‰¹é‡æ›´æ–°
client.updateConfigs({
  requireTTS: false,
  enableSRS: true
});
```

### 3. å®‰å…¨å­˜å‚¨ âœ…

ä¼šè¯æ•°æ®å’Œæ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨ã€‚

### 4. å®æ—¶é€šä¿¡ âœ…

WebSocket å…¨åŒå·¥é€šä¿¡ï¼Œæ”¯æŒæµå¼å“åº”ã€‚

### 5. éŸ³é¢‘å¤„ç† âœ…

å†…ç½®å½•éŸ³ã€æ’­æ”¾ã€VAD è¯­éŸ³æ£€æµ‹ï¼ˆåŸºäº AudioWorkletï¼‰ã€‚

**æŠ€æœ¯ç‰¹ç‚¹ï¼š**
- âœ… ä½¿ç”¨ AudioWorkletNodeï¼ˆç°ä»£ Web Audio APIï¼‰
- âœ… éŸ³é¢‘å¤„ç†åœ¨ç‹¬ç«‹çº¿ç¨‹è¿è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹
- âœ… æ›´ä½çš„å»¶è¿Ÿå’Œæ›´å¥½çš„æ€§èƒ½
- âœ… ç¬¦åˆ Web æ ‡å‡†ï¼Œæœªæ¥å…¼å®¹æ€§æ›´å¥½

## ğŸ”’ å®‰å…¨æ€§

- âœ… ä¼šè¯æ•°æ®åŠ å¯†å­˜å‚¨
- âœ… æ•æ„Ÿä¿¡æ¯åŠ å¯†ä¼ è¾“
- âœ… XSS é˜²æŠ¤
- âœ… è¾“å…¥éªŒè¯

## ğŸ“Š æ€§èƒ½

- **SDK ä½“ç§¯**ï¼š34KBï¼ˆå‹ç¼©åï¼‰+ 5KBï¼ˆAudioWorklet å¤„ç†å™¨ï¼‰
- **åŠ è½½æ—¶é—´**ï¼š<100ms
- **å†…å­˜å ç”¨**ï¼š<10MB
- **éŸ³é¢‘å¤„ç†**ï¼šç‹¬ç«‹çº¿ç¨‹ï¼Œä¸é˜»å¡ UI
- **æ”¯æŒæµè§ˆå™¨**ï¼š
  - Chrome 66+ / Edge 79+ï¼ˆå®Œå…¨æ”¯æŒï¼‰
  - Firefox 76+ï¼ˆå®Œå…¨æ”¯æŒï¼‰
  - Safari 14.1+ï¼ˆå®Œå…¨æ”¯æŒï¼‰
  - Opera 53+ï¼ˆå®Œå…¨æ”¯æŒï¼‰
  - å…¨çƒè¦†ç›–ç‡ï¼š~94%

## ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§

### âœ… å®Œå…¨æ”¯æŒ

| æµè§ˆå™¨ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ | è¯´æ˜ |
|--------|---------|---------|------|
| Chrome | 66+ | 90+ | å®Œå…¨æ”¯æŒï¼Œæ€§èƒ½æœ€ä½³ |
| Edge | 79+ | 90+ | åŸºäº Chromiumï¼Œä¸ Chrome ä¸€è‡´ |
| Firefox | 76+ | 100+ | å®Œå…¨æ”¯æŒ |
| Safari (macOS) | 14.1+ | 16.0+ | å®Œå…¨æ”¯æŒ |
| Safari (iOS) | 14.5+ | 16.0+ | å®Œå…¨æ”¯æŒï¼Œéœ€ HTTPS |
| Opera | 53+ | æœ€æ–° | åŸºäº Chromium |

### âš ï¸ éƒ¨åˆ†æ”¯æŒ

- **Safari 14.0 åŠä»¥ä¸‹**ï¼šä¸æ”¯æŒ AudioWorkletï¼Œå½•éŸ³åŠŸèƒ½æ— æ³•ä½¿ç”¨
- **æ—§ç‰ˆ Android æµè§ˆå™¨**ï¼šå¯èƒ½ä¸æ”¯æŒ

### âŒ ä¸æ”¯æŒ

- **Internet Explorer**ï¼šå®Œå…¨ä¸æ”¯æŒï¼ˆå·²åœæ­¢ç»´æŠ¤ï¼‰
- **Chrome < 66**ï¼šç¼ºå°‘ AudioWorklet æ”¯æŒ
- **Firefox < 76**ï¼šç¼ºå°‘ AudioWorklet æ”¯æŒ

### ğŸ“± ç§»åŠ¨ç«¯

- **Android Chrome 66+**ï¼šâœ… å®Œå…¨æ”¯æŒ
- **iOS Safari 14.5+**ï¼šâœ… å®Œå…¨æ”¯æŒï¼ˆéœ€ HTTPSï¼‰
- **å¾®ä¿¡å†…ç½®æµè§ˆå™¨**ï¼šâš ï¸ å¯èƒ½æœ‰é™åˆ¶ï¼Œå»ºè®®åœ¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€

## ğŸ¨ è‡ªå®šä¹‰

### ä¿®æ”¹æ ·å¼

ç¼–è¾‘ `src/styles.css` æ–‡ä»¶è‡ªå®šä¹‰ç•Œé¢æ ·å¼ã€‚

### æ·»åŠ ç»„ä»¶

åœ¨ `src/components/` ç›®å½•ä¸‹åˆ›å»ºæ–°ç»„ä»¶ã€‚

### ä¿®æ”¹ä¸šåŠ¡é€»è¾‘

ç¼–è¾‘ `src/app.js` ä¿®æ”¹åº”ç”¨æµç¨‹ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“® è”ç³»æ–¹å¼

- GitHub: https://github.com/your-org/museum-agent
- Email: support@museum-agent.com

## ğŸ¯ ç›¸å…³é¡¹ç›®

- **SDK ä»“åº“**ï¼š`../../sdk/` - MuseumAgent Client SDK
- **é¡¹ç›®ç»“æ„è¯´æ˜**ï¼š`../../PROJECT_STRUCTURE.md` - å®Œæ•´çš„é¡¹ç›®ç»“æ„æ–‡æ¡£
